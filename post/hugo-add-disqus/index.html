<!doctype html><html lang=en>
<head>
<title>Jasper Chen | 在 Hugo 部落格加裝 Disqus 討論串</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1">
<link rel=apple-touch-icon sizes=180x180 href=/hugoBlog/favicon/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/hugoBlog/favicon/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/hugoBlog/favicon/favicon-16x16.png>
<link rel=manifest href=/hugoBlog/favicon/site.webmanifest>
<link rel=mask-icon href=/hugoBlog/favicon/safari-pinned-tab.svg color=#5bbad5>
<link rel="shortcut icon" href=/hugoBlog/favicon/favicon.ico>
<meta name=theme-color content="#ffffff">
<meta property="og:title" content="Jasper Chen | 在 Hugo 部落格加裝 Disqus 討論串">
<link rel=stylesheet href="https://jasperdyb.github.io/hugoBlog/css/styles.min.258dcf3828acb0c9aa0a48a52e79142a44ee20d3144238529c065f93de56f15c.css">
<link href=/hugoBlog/css/blonde.min.css rel=stylesheet type=text/css media=print onload="this.media='all'">
<meta name=description content="建立 Disqus 專案 在 Disqus 登入後到個人的 Settings
再到右上選單選 Add Disqus To Site
接著是一長串的介紹，直接捲到最底下選擇 Get Started。
選擇 I want to install Disqus on my site 。
接下來的表單設定網站的名稱，類型跟語言，之後可以再改，都輸入後選擇 Create Site。
專案建好後選擇設定，找到 Shortname 的值並記下來。
這樣 Disqus 就設定好了，接著回到 Hugo 加入 Disqus 的元件。
Hugo 加入 Disqus 元件 Hugo 本身已經有預設的 Disqus 套件，大部分部落格類別的主題會已經有加上了。
{{ template &#34;_internal/disqus.html&#34; . }} 如果是用這個組件的話接下來只要在 config 中設定 disqusShortname 參數即可，用的就是剛剛在 Disqus 建立專案後取得的 Shortname。
disqusShortname = &#34;&#34; 不過設定後在 Local 的 Dev Server 建成的網站上也沒辦法看到 Disqus 的畫面，因為預設在 Local 環境是不會應用的，要等上傳到 Github Page 才看的到。">
<meta property="og:site_name" content="Jasper Chen">
<meta property="og:description" content="建立 Disqus 專案 在 Disqus 登入後到個人的 Settings
再到右上選單選 Add Disqus To Site
接著是一長串的介紹，直接捲到最底下選擇 Get Started。
選擇 I want to install Disqus on my site 。
接下來的表單設定網站的名稱，類型跟語言，之後可以再改，都輸入後選擇 Create Site。
專案建好後選擇設定，找到 Shortname 的值並記下來。
這樣 Disqus 就設定好了，接著回到 Hugo 加入 Disqus 的元件。
Hugo 加入 Disqus 元件 Hugo 本身已經有預設的 Disqus 套件，大部分部落格類別的主題會已經有加上了。
{{ template &#34;_internal/disqus.html&#34; . }} 如果是用這個組件的話接下來只要在 config 中設定 disqusShortname 參數即可，用的就是剛剛在 Disqus 建立專案後取得的 Shortname。
disqusShortname = &#34;&#34; 不過設定後在 Local 的 Dev Server 建成的網站上也沒辦法看到 Disqus 的畫面，因為預設在 Local 環境是不會應用的，要等上傳到 Github Page 才看的到。">
<meta property="og:url" content="https://jasperdyb.github.io/hugoBlog/post/hugo-add-disqus/">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:site content>
<link rel=canonical href=https://jasperdyb.github.io/hugoBlog/post/hugo-add-disqus/>
<meta name=twitter:description content="建立 Disqus 專案 在 Disqus 登入後到個人的 Settings
再到右上選單選 Add Disqus To Site
接著是一長串的介紹，直接捲到最底下選擇 Get Started。
選擇 I want to install Disqus on my site 。
接下來的表單設定網站的名稱，類型跟語言，之後可以再改，都輸入後選擇 Create Site。
專案建好後選擇設定，找到 Shortname 的值並記下來。
這樣 Disqus 就設定好了，接著回到 Hugo 加入 Disqus 的元件。
Hugo 加入 Disqus 元件 Hugo 本身已經有預設的 Disqus 套件，大部分部落格類別的主題會已經有加上了。
{{ template &#34;_internal/disqus.html&#34; . }} 如果是用這個組件的話接下來只要在 config 中設定 disqusShortname 參數即可，用的就是剛剛在 Disqus 建立專案後取得的 Shortname。
disqusShortname = &#34;&#34; 不過設定後在 Local 的 Dev Server 建成的網站上也沒辦法看到 Disqus 的畫面，因為預設在 Local 環境是不會應用的，要等上傳到 Github Page 才看的到。">
<meta property="article:published_time" content="2021-10-18T22:50:06+08:00">
<meta property="article:updated_time" content="2021-10-18T22:50:06+08:00">
<meta property="og:image" content="https://jasperdyb.github.io/hugoBlog/img/hugoCover.png">
<meta property="og:image:url" content="https://jasperdyb.github.io/hugoBlog/img/hugoCover.png">
<link rel=stylesheet href=/hugoBlog/css/custom.css>
<i class="dark hidden"></i>
</head>
<body class=font-sans>
<div class="min-h-screen flex flex-col bg-gray-100 dark:bg-warmgray-800"><div class=bg-gray-800>
<div class="container max-w-screen-xl mr-auto ml-auto">
<nav class="flex items-center justify-between flex-wrap bg-gray-800 p-6">
<div class="flex items-center flex-no-shrink bg-gray-800 text-white mr-6">
<a href=https://jasperdyb.github.io/hugoBlog/><span class="font-semibold text-2xl tracking-tight">Jasper Chen</span></a>
</div>
<div class="flex md:hidden">
<div class=py-2>
<button onclick=toggleDarkMode() class="focus:outline-none mr-1" aria-label="Darkmode Toggle Button"><i id=icon class="icon-moon inline-flex align-middle leading-normal text-lg text-white"></i></button>
<span class=text-white>|</span>
</div>
<button id=hamburgerbtn class="flex items-center px-3 py-1 text-white hover:opacity-50" aria-label="Hamburger Button">
<span class="icon-menu text-2xl"></span>
</button>
</div>
<div class="hidden w-full md:flex md:flex-row sm:items-center md:w-auto" id=mobileMenu>
<div class="text-sm lg:flex-grow">
</div>
<div class=navmenu>
</div>
<div class="text-white invisible md:visible">
<span>|</span>
<button onclick=toggleDarkMode() class=focus:outline-none aria-label="Darkmode Toggle Button"><i id=icon2 class="icon-moon hover:opacity-50 duration-200 inline-flex align-middle leading-normal text-lg ml-2"></i></button>
</div>
</div>
</nav>
</div>
</div>
<style>.active{display:block}</style>
<script>let hamburger=document.getElementById('hamburgerbtn'),mobileMenu=document.getElementById('mobileMenu');hamburger.addEventListener('click',function(){mobileMenu.classList.toggle('active')})</script>
<div class="container max-w-screen-xl mx-auto mt-4 flex-grow px-5 lg:px-0" id=content>
<div class=lg:mx-5>
<div class="grid grid-cols-3 gap-4">
<div class="col-span-3 lg:col-span-2 dark:text-white">
<div class="bg-white dark:bg-warmgray-900 p-5 my-4">
<h1 class="title text-4xl">在 Hugo 部落格加裝 Disqus 討論串</h1>
<hr class=my-2>
<aside id=meta>
<div>
<section>
<h4 id=date><span class="icon-access_time mr-2"></span>2021/10/18 </h4>
</section>
<div id=tags>
<span class="icon-local_offer mr-1"></span>
<a href=https://jasperdyb.github.io/hugoBlog/tags/hugo>Hugo</a> |
<a href=https://jasperdyb.github.io/hugoBlog/tags/github-workflow>Github Workflow</a> |
<a href=https://jasperdyb.github.io/hugoBlog/tags/disqus>Disqus</a> |
</div>
</div>
</aside>
<hr class=my-2>
<img class=py-4 src=https://jasperdyb.github.io/hugoBlog/img/hugoCover.png>
<div class="content mt-5"><h1 id=建立-disqus-專案>建立 Disqus 專案</h1>
<p>在 Disqus 登入後到個人的 Settings</p>
<p><p class=px-8>
<img class="object-scale-down max-h-45 w-full" src=2021-10-19-23-21-35.png alt>
</p></p>
<p>再到右上選單選 Add Disqus To Site</p>
<p><p class=px-8>
<img class="object-scale-down max-h-45 w-full" src=2021-10-19-23-22-32.png alt>
</p></p>
<p>接著是一長串的介紹，直接捲到最底下選擇 Get Started。</p>
<p>選擇 I want to install Disqus on my site 。</p>
<p><p class=px-8>
<img class="object-scale-down max-h-45 w-full" src=2021-10-19-23-23-58.png alt>
</p></p>
<p>接下來的表單設定網站的名稱，類型跟語言，之後可以再改，都輸入後選擇 Create Site。</p>
<p>專案建好後選擇設定，找到 Shortname 的值並記下來。</p>
<p><p class=px-8>
<img class="object-scale-down max-h-45 w-full" src=2021-10-19-23-25-05.png alt>
</p></p>
<p>這樣 Disqus 就設定好了，接著回到 Hugo 加入 Disqus 的元件。</p>
<h1 id=hugo-加入-disqus-元件>Hugo 加入 Disqus 元件</h1>
<p>Hugo 本身已經有預設的 Disqus 套件，大部分部落格類別的主題會已經有加上了。</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>{{ template <span style=color:#ed9d13>&#34;_internal/disqus.html&#34;</span> . }}
</code></pre></div><p>如果是用這個組件的話接下來只要在 config 中設定 <code>disqusShortname</code> 參數即可，用的就是剛剛在 Disqus 建立專案後取得的 <code>Shortname</code>。</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>disqusShortname = <span style=color:#ed9d13>&#34;&#34;</span>
</code></pre></div><p>不過設定後在 Local 的 Dev Server 建成的網站上也沒辦法看到 Disqus 的畫面，因為預設在 Local 環境是不會應用的，要等上傳到 Github Page 才看的到。</p>
<pre tabindex=0><code>Disqus comments not available by default when the website is previewed locally.
comments powered by Disqus
</code></pre><h1 id=設定-github-環境變數>設定 Github 環境變數</h1>
<p>Disqus 的 <code>Shortname</code> 是個私鑰，所以不應該直接寫在 commit 當中，這時候要運用 Github 的 Secret 設定跟 Github Action 動態設定環境變數的功能。</p>
<p>首先在部落格的 Repo 中建立對應 Disqus Shortname 的 Secret，路徑: Settings > Secrets，這邊建的名稱叫做 <code>DISQUS_SHORT_NAME</code>。</p>
<p><p class=px-8>
<img class="object-scale-down max-h-45 w-full" src=2021-10-18-23-42-29.png alt>
</p></p>
<p>接著來修改一下 CI 文件的流程，在進行 Hugo Build 的時候指定 <code>disqusShortname</code> 的值為剛剛建立的 <code>DISQUS_SHORT_NAME</code>。</p>
<p>Hugo 讀取環境變數的方法是當環境變數的名稱以 <code>HUGO_</code> 開頭的話，就會將其後的名稱作為 config 的名稱並帶入其值然後建置，所以設定環境變數 <code>HUGO_disqusShortname</code> 的話就能修改 config 中 <code>disqusShortname</code>的值。</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#999;font-style:italic># 用 Hugo 編譯靜態檔案，使用 production config</span><span style=color:#666>
</span><span style=color:#666></span>- <span style=color:#6ab825;font-weight:700>name</span>:<span style=color:#666> </span>Build<span style=color:#666>
</span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>run</span>:<span style=color:#666> </span>hugo --minify --environment production<span style=color:#666>
</span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>env</span>:<span style=color:#666>          
</span><span style=color:#666>      </span><span style=color:#6ab825;font-weight:700>HUGO_disqusShortname</span>:<span style=color:#666> </span>${{ secrets.DISQUS_SHORT_NAME }}<span style=color:#666>
</span></code></pre></div><p>這樣當推上新的 main 分支並建置後文章底下就會出現 Disqus 面板了。</p>
<p><p class=px-8>
<img class="object-scale-down max-h-45 w-full" src=2021-10-18-23-50-00.png alt>
</p></p>
</div>
<aside id=meta>
<hr class=py-2>
<div id=categories>
<span class="icon-folder text-xl mr-1"></span>
<span class="inline-flex py-2 leading-4 mr-2 mb-2 content-center bg-gray-200 justify-center h-8 px-3 text-blue-500 duration-200 hover:text-black dark:bg-warmgray-800"><a href=https://jasperdyb.github.io/hugoBlog/categories/frontend>Frontend</a></span>
<span class="inline-flex py-2 leading-4 mr-2 mb-2 content-center bg-gray-200 justify-center h-8 px-3 text-blue-500 duration-200 hover:text-black dark:bg-warmgray-800"><a href=https://jasperdyb.github.io/hugoBlog/categories/static-website>Static Website</a></span>
</div>
</aside>
</div>
<div class="bg-white dark:bg-warmgray-900 p-5 my-4">
<div class="grid grid-cols-2">
<div class=col-span-1>
<a class="previous lg:text-2xl" href=https://jasperdyb.github.io/hugoBlog/post/create-hugo-blog/>
<div class="transition-colors duration-300 border border-gray-600 hover:border-black h-auto m-3 text-center py-3 lg:py-1">
<span class=icon-keyboard_arrow_left></span> 建立 Hugo 部落格並配置到 Github Page
</div>
</a>
</div>
</div>
</div>
<div class="bg-white dark:bg-warmgray-900 p-5 my-4">
<div class=mb-3>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//jaspers-tech-blog.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
</div>
<div class="hidden lg:block lg:col-span-1">
<div class=mb-3>
<form class=widget-search__form role=search method=get action=https://google.com/search>
<label>
<input class="w-full p-3 focus:outline-none dark:bg-warmgray-900 dark:text-white placeholder-gray-700 dark:placeholder-gray-300" type=search placeholder=Search... name=q aria-label=Search>
</label>
<input class=hidden type=submit value=Search>
<input type=hidden name=sitesearch value=https://jasperdyb.github.io/hugoBlog/>
</form>
</div>
<div class="bg-white panel mb-3 pb-5 dark:bg-warmgray-900">
<p class="text-xl text-center text-gray-700 py-3 px-3 dark:text-gray-300">Archives</p>
<a class="text-center block duration-100 py-2 px-4 mx-4 hover:bg-gray-100 text-gray-800 dark:text-gray-200 dark:hover:bg-warmgray-800" href=https://jasperdyb.github.io/hugoBlog//archives/hugo-guide>hugo-guide (2)</a>
</div>
<div class="bg-white panel mb-3 pb-5 dark:bg-warmgray-900">
<p class="text-xl text-center text-gray-700 py-5 dark:text-gray-300">Categories</p>
<a class="text-center block duration-100 py-2 px-4 mx-4 hover:bg-gray-100 text-gray-800 dark:text-gray-200 dark:hover:bg-warmgray-800" href=https://jasperdyb.github.io/hugoBlog//categories/frontend>Frontend</a>
<a class="text-center block duration-100 py-2 px-4 mx-4 hover:bg-gray-100 text-gray-800 dark:text-gray-200 dark:hover:bg-warmgray-800" href=https://jasperdyb.github.io/hugoBlog//categories/static-website>Static website</a>
</div>
<div class="bg-white panel mb-3 dark:bg-warmgray-900">
<p class="text-xl text-center text-gray-700 py-3 pl-3 dark:text-gray-300">Tags</p>
<div class="panel-block p-2">
<a href=/hugoBlog/tags/disqus>
<span class="duration-100 inline-flex py-2 leading-4 mr-2 mb-2 content-center bg-gray-100 justify-center h-8 px-3 text-blue-500 hover:text-blue-900 dark:bg-warmgray-800">
disqus
</span></a>
<a href=/hugoBlog/tags/github-pages>
<span class="duration-100 inline-flex py-2 leading-4 mr-2 mb-2 content-center bg-gray-100 justify-center h-8 px-3 text-blue-500 hover:text-blue-900 dark:bg-warmgray-800">
github-pages
</span></a>
<a href=/hugoBlog/tags/github-workflow>
<span class="duration-100 inline-flex py-2 leading-4 mr-2 mb-2 content-center bg-gray-100 justify-center h-8 px-3 text-blue-500 hover:text-blue-900 dark:bg-warmgray-800">
github-workflow
</span></a>
<a href=/hugoBlog/tags/hugo>
<span class="duration-100 inline-flex py-2 leading-4 mr-2 mb-2 content-center bg-gray-100 justify-center h-8 px-3 text-blue-500 hover:text-blue-900 dark:bg-warmgray-800">
hugo
</span></a>
</div>
</div>
<div class="bg-white panel mb-3 pb-5 dark:bg-warmgray-900">
<p class="text-xl text-center text-gray-700 py-5 dark:text-gray-300">Recent Posts</p>
<div class=mx-6>
<a href=/hugoBlog/post/hugo-add-disqus/>
<div class="w-full block mt-3 bg-white hover:bg-gray-100 duration-200 dark:bg-warmgray-900 dark:text-gray-200 dark:hover:bg-warmgray-800">
<div class=px-2>
<div class="text-gray-900 font-bold text-xl dark:text-white">在 Hugo 部落格加裝 Disqus 討論串</div>
<p class="text-sm text-gray-600 flex items-center pb-1 dark:text-gray-400">
<time><span class="icon-access_time mr-1"></span>2021/10/18</time>
</p>
</div>
</div>
<a href=/hugoBlog/post/create-hugo-blog/>
<div class="w-full block mt-3 bg-white hover:bg-gray-100 duration-200 dark:bg-warmgray-900 dark:text-gray-200 dark:hover:bg-warmgray-800">
<div class=px-2>
<div class="text-gray-900 font-bold text-xl dark:text-white">建立 Hugo 部落格並配置到 Github Page</div>
<p class="text-sm text-gray-600 flex items-center pb-1 dark:text-gray-400">
<time><span class="icon-access_time mr-1"></span>2021/10/16</time>
</p>
</div>
</div>
</a>
</div>
</div>
</div>
</div>
</div>
</div><footer class="bg-gray-800 text-white p-6">
<div class="container max-w-screen-xl mr-auto ml-auto">
<p>&copy; 2021 <a href=https://jasperdyb.github.io/hugoBlog/ class="duration-200 hover:opacity-50">Jasper Chen</a></p>
<p>Powered by <a href=https://gohugo.io/ class="duration-200 hover:opacity-50">Hugo</a>, Theme <a href=https://github.com/opera7133/Blonde class="duration-200 hover:opacity-50">Blonde</a>.</p>
</div>
<script>var icon=document.getElementById("icon"),icon2=document.getElementById("icon2");document.documentElement.classList.contains("dark")||localStorage.theme==='dark'||!('theme'in localStorage)&&window.matchMedia('(prefers-color-scheme: dark)').matches?(icon.classList.remove("icon-moon"),icon.classList.add("icon-sun"),icon2.classList.remove("icon-moon"),icon2.classList.add("icon-sun"),document.documentElement.classList.add('dark')):document.documentElement.classList.remove('dark');function toggleDarkMode(){document.documentElement.classList.contains('dark')?(icon.classList.remove("icon-sun"),icon.classList.add("icon-moon"),icon2.classList.remove("icon-sun"),icon2.classList.add("icon-moon"),document.documentElement.classList.remove('dark'),localStorage.theme='light'):(icon.classList.remove("icon-moon"),icon.classList.add("icon-sun"),icon2.classList.remove("icon-moon"),icon2.classList.add("icon-sun"),document.documentElement.classList.add('dark'),localStorage.theme='dark')}</script>
</footer>
</div>
</body>
</html>